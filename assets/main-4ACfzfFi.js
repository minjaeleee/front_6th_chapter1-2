var Ce=Object.defineProperty;var ce=e=>{throw TypeError(e)};var Te=(e,t,s)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var U=(e,t,s)=>Te(e,typeof t!="symbol"?t+"":t,s),B=(e,t,s)=>t.has(e)||ce("Cannot "+s);var x=(e,t,s)=>(B(e,t,"read from private field"),s?s.call(e):t.get(e)),R=(e,t,s)=>t.has(e)?ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),O=(e,t,s,a)=>(B(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),j=(e,t,s)=>(B(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const Ae="modulepreload",Oe=function(e){return"/front_6th_chapter1-2/"+e},le={},_e=function(t,s,a){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=Oe(c),c in le)return;le[c]=!0;const i=c.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=i?"stylesheet":Ae,i||(h.as="script"),h.crossOrigin="",h.href=c,d&&h.setAttribute("nonce",d),document.head.appendChild(h),i)return new Promise((A,V)=>{h.addEventListener("load",A),h.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return n.then(l=>{for(const d of l||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})},P=new Map;let z=null,ie=!1;function Le(e){if(ie&&z===e)return;z=e,ie=!0;const t=["mouseover","mouseout","focus","blur"],s=["click","input","change","submit","keydown","keyup"];t.forEach(a=>{e.addEventListener(a,de,!0)}),s.forEach(a=>{e.addEventListener(a,de,!1)})}function de(e){const t=e.target,s=e.type,a=P.get(s);if(!a)return;let n=t;for(;n&&n!==z;){const o=a.get(n);if(o&&o.forEach(l=>{try{if(l.call(n,e),e.defaultPrevented||e.cancelBubble)return}catch(d){console.error("Event handler error:",d)}}),e.defaultPrevented||e.cancelBubble)break;n=n.parentElement}}function Y(e,t,s){if(!e||!t||typeof s!="function"){console.warn("Invalid parameters for addEvent:",{element:e,eventType:t,handler:s});return}P.has(t)||P.set(t,new Map);const a=P.get(t);a.has(e)||a.set(e,[]);const n=a.get(e);n.includes(s)||n.push(s)}function ue(e,t,s){if(!e||!t){console.warn("Invalid parameters for removeEvent:",{element:e,eventType:t});return}const a=P.get(t);if(!a)return;const n=a.get(e);if(n){if(s){const o=n.indexOf(s);o>-1&&n.splice(o,1)}else a.delete(e);a.size===0&&P.delete(t)}}function _(e){if(Array.isArray(e)){const a=document.createDocumentFragment();return e.forEach(n=>{if(n!=null){const o=_(n);a.appendChild(o)}}),a.childNodes.length===1?a.firstChild:a}if(typeof e=="string"||typeof e=="number")return document.createTextNode(e);if(e==null||typeof e=="boolean")return document.createTextNode("");const t=document.createElement(e.type);Re(t,e.props||{});const s=e.children||e.props&&e.props.children;if(s&&(Array.isArray(s)?s:[s]).forEach(n=>{if(n!=null){const o=_(n);t.appendChild(o)}}),e.type==="select"){const a=t.querySelectorAll("option");let n=!1;a.forEach(o=>{o.selected&&(n=!0)}),!n&&a.length>0&&(a[0].selected=!0)}return t}function Re(e,t){const s={},a={};Object.keys(t).forEach(o=>{if(o.startsWith("on")&&typeof t[o]=="function"){const l=o.toLowerCase().substring(2);s[l]=t[o]}else o!=="children"&&(a[o]=t[o])}),["checked","disabled","selected","readOnly"].forEach(o=>{a[o]!==void 0&&(e[o]=a[o],a[o]===!0?o==="checked"?e.removeAttribute(o):e.setAttribute(o,""):e.removeAttribute(o),delete a[o])}),Object.keys(a).forEach(o=>{o==="style"&&typeof a[o]=="object"?Object.assign(e.style,a[o]):o==="className"?e.className=a[o]:e.setAttribute(o,a[o])}),Object.keys(s).forEach(o=>{Y(e,o,s[o])})}const ye=()=>{const e=new Set;return{subscribe:a=>e.add(a),notify:()=>e.forEach(a=>a())}},Ie=(e,t=window.localStorage)=>({get:()=>{try{const o=t.getItem(e);return o?JSON.parse(o):null}catch(o){return console.error(`Error parsing storage item for key "${e}":`,o),null}},set:o=>{try{t.setItem(e,JSON.stringify(o))}catch(l){console.error(`Error setting storage item for key "${e}":`,l)}},reset:()=>{try{t.removeItem(e)}catch(o){console.error(`Error removing storage item for key "${e}":`,o)}}}),X=(e,t)=>{const{subscribe:s,notify:a}=ye();let n=t;return{getState:()=>n,dispatch:d=>{const c=e(n,d);c!==n&&(n=c,a())},subscribe:s}};function he(e){const t=[];for(const s of e)Array.isArray(s)?t.push(...he(s)):s!=null&&s!==!1&&s!==void 0&&t.push(s);return t}function r(e,t,...s){return{type:e,props:t,children:he(s)}}function $(e){if(e==null||typeof e=="boolean")return"";if(typeof e=="string"||typeof e=="number")return e.toString();if(Array.isArray(e))return e.map($).filter(t=>t!=="");if(typeof e=="object"&&e.type){if(typeof e.type=="function"){const t=e.type,s={...e.props,children:e.children},a=t(s);return $(a)}return{...e,children:Array.isArray(e.children)?e.children.map($).filter(t=>t!==""):e.children}}return""}function Pe(e,t){return typeof e=="function"&&typeof t=="function"&&e.name===t.name||e===t}function be(e,t,s,a=0){if(!t&&s)return e.removeChild(e.childNodes[a]);if(t&&!s)return e.appendChild(_(t));if(typeof t=="string"&&typeof s=="string")return t===s?void 0:e.replaceChild(_(t),e.childNodes[a]);if(!Pe(t.type,s.type))return e.replaceChild(_(t),e.childNodes[a]);ke(e.childNodes[a],t.props||{},s.props||{});const n=t.children||[],o=s.children||[];for(let l=0;l<Math.min(n.length,o.length);l++)be(e.childNodes[a],n[l],o[l],l);for(let l=o.length;l<n.length;l++){const d=_(n[l]);e.childNodes[a].appendChild(d)}for(let l=o.length-1;l>=n.length;l--)e.childNodes[a].childNodes[l]&&e.childNodes[a].removeChild(e.childNodes[a].childNodes[l])}function ke(e,t,s){const a={},n={},o={},l={};Object.keys(t).forEach(c=>{if(c.startsWith("on")&&typeof t[c]=="function"){const i=c.toLowerCase().substring(2);a[i]=t[c]}else(c==="className"||c!=="children")&&(o[c]=t[c])}),Object.keys(s).forEach(c=>{if(c.startsWith("on")&&typeof s[c]=="function"){const i=c.toLowerCase().substring(2);n[i]=s[c]}else(c==="className"||c!=="children")&&(l[c]=s[c])}),Object.keys(n).forEach(c=>{a[c]||ue(e,c,n[c])}),Object.keys(a).forEach(c=>{const i=a[c],u=n[c];u&&u!==i?(ue(e,c,u),Y(e,c,i)):u||Y(e,c,i)});const d=["checked","disabled","selected","readOnly"];if(d.forEach(c=>{const i=t[c],u=s[c];i!==void 0?i!==u&&(e[c]=i,i===!0?c==="checked"?e.removeAttribute(c):e.setAttribute(c,""):e.removeAttribute(c)):u!==void 0&&(e[c]=!1,e.removeAttribute(c))}),e.tagName==="OPTION"&&("selected"in t||"selected"in s)&&(t.selected?(e.selected=!0,e.removeAttribute("selected")):(e.selected=!1,e.removeAttribute("selected"))),e.tagName==="SELECT"){const c=e.querySelectorAll("option");let i=!1;c.forEach(u=>{u.selected&&(i=!0)}),!i&&c.length>0&&(c[0].selected=!0)}for(const[c,i]of Object.entries(o))d.includes(c)||l[c]!==o[c]&&(c==="className"?e.className=i:c==="style"&&typeof i=="object"?Object.assign(e.style,i):e.setAttribute(c,i));for(const c of Object.keys(l))d.includes(c)||o[c]===void 0&&(c==="className"?(e.className="",e.removeAttribute("class")):e.removeAttribute(c))}function De(e,t){const s=$(e),a=t._vNode;if(a)be(t,s,a);else{const n=_(s);t.appendChild(n)}t._vNode=s,Le(t)}var k,E,L,C,D,Q;const S=class S{constructor(t=""){R(this,D);R(this,k);R(this,E);R(this,L,ye());R(this,C);O(this,k,new Map),O(this,E,null),O(this,C,t.replace(/\/$/,"")),window.addEventListener("popstate",()=>{O(this,E,j(this,D,Q).call(this)),x(this,L).notify()}),document.addEventListener("click",s=>{if(s.target.closest("[data-link]")){s.preventDefault();const a=s.target.getAttribute("href")||s.target.closest("[data-link]").getAttribute("href");a&&this.push(a)}})}get baseUrl(){return x(this,C)}get query(){return S.parseQuery(window.location.search)}set query(t){const s=S.getUrl(t,x(this,C));this.push(s)}get params(){var t;return((t=x(this,E))==null?void 0:t.params)??{}}get route(){return x(this,E)}get target(){var t;return(t=x(this,E))==null?void 0:t.handler}subscribe(t){x(this,L).subscribe(t)}addRoute(t,s){const a=[],n=t.replace(/:\w+/g,l=>(a.push(l.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),o=new RegExp(`^${x(this,C)}${n}$`);x(this,k).set(t,{regex:o,paramNames:a,handler:s})}push(t){try{let s=t.startsWith(x(this,C))?t:x(this,C)+(t.startsWith("/")?t:"/"+t);`${window.location.pathname}${window.location.search}`!==s&&window.history.pushState(null,"",s),O(this,E,j(this,D,Q).call(this,s)),x(this,L).notify()}catch(s){console.error("라우터 네비게이션 오류:",s)}}start(){O(this,E,j(this,D,Q).call(this)),x(this,L).notify()}};k=new WeakMap,E=new WeakMap,L=new WeakMap,C=new WeakMap,D=new WeakSet,Q=function(t=window.location.pathname){const{pathname:s}=new URL(t,window.location.origin);for(const[a,n]of x(this,k)){const o=s.match(n.regex);if(o){const l={};return n.paramNames.forEach((d,c)=>{l[d]=o[c+1]}),{...n,params:l,path:a}}}return null},U(S,"parseQuery",(t=window.location.search)=>{const s=new URLSearchParams(t),a={};for(const[n,o]of s)a[n]=o;return a}),U(S,"stringifyQuery",t=>{const s=new URLSearchParams;for(const[a,n]of Object.entries(t))n!=null&&n!==""&&s.set(a,String(n));return s.toString()}),U(S,"getUrl",(t,s="")=>{const n={...S.parseQuery(),...t};Object.keys(n).forEach(l=>{(n[l]===null||n[l]===void 0||n[l]==="")&&delete n[l]});const o=S.stringifyQuery(n);return`${s}${window.location.pathname.replace(s,"")}${o?`?${o}`:""}`});let J=S;const f={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},y={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},v={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},Z={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:{}},qe=(e,t)=>{switch(t.type){case f.SET_STATUS:return{...e,status:t.payload};case f.SET_CATEGORIES:return{...e,categories:t.payload,loading:!1,error:null,status:"done"};case f.SET_PRODUCTS:return{...e,products:t.payload.products,totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case f.ADD_PRODUCTS:return{...e,products:[...e.products,...t.payload.products],totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case f.SET_LOADING:return{...e,loading:t.payload};case f.SET_ERROR:return{...e,error:t.payload,loading:!1,status:"done"};case f.SET_CURRENT_PRODUCT:return{...e,currentProduct:t.payload,loading:!1,error:null,status:"done"};case f.SET_RELATED_PRODUCTS:return{...e,relatedProducts:t.payload,status:"done"};case f.SETUP:return{...e,...t.payload};default:return e}},p=X(qe,Z),ee=Ie("shopping_cart"),xe={items:[],selectedAll:!1},Me=(e,t)=>e.find(s=>s.id===t),Ue=(e,t)=>{const s=ee.get()??xe;switch(t.type){case y.ADD_ITEM:{const{product:a,quantity:n=1}=t.payload;if(Me(s.items,a.productId))return{...s,items:s.items.map(l=>l.id===a.productId?{...l,quantity:l.quantity+n}:l)};{const l={id:a.productId,title:a.title,image:a.image,price:parseInt(a.lprice),quantity:n,selected:!1};return{...s,items:[...s.items,l]}}}case y.REMOVE_ITEM:return{...s,items:s.items.filter(a=>a.id!==t.payload)};case y.UPDATE_QUANTITY:{const{productId:a,quantity:n}=t.payload;return{...s,items:s.items.map(o=>o.id===a?{...o,quantity:Math.max(1,n)}:o)}}case y.CLEAR_CART:return{...s,items:[],selectedAll:!1};case y.TOGGLE_SELECT:{const a=t.payload,n=s.items.map(l=>l.id===a?{...l,selected:!l.selected}:l),o=n.length>0&&n.every(l=>l.selected);return{...s,items:n,selectedAll:o}}case y.SELECT_ALL:{const a=s.items.map(n=>({...n,selected:!0}));return{...s,items:a,selectedAll:!0}}case y.DESELECT_ALL:{const a=s.items.map(n=>({...n,selected:!1}));return{...s,items:a,selectedAll:!1}}case y.REMOVE_SELECTED:return{...s,items:s.items.filter(a=>!a.selected),selectedAll:!1};case y.LOAD_FROM_STORAGE:return{...s,...t.payload};default:return s}},w=X(Ue,xe),je={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},He=(e,t)=>{switch(t.type){case v.OPEN_CART_MODAL:return{...e,cartModal:{isOpen:!0}};case v.CLOSE_CART_MODAL:return{...e,cartModal:{isOpen:!1}};case v.HIDE_TOAST:return{...e,toast:{...e.toast,isVisible:!1}};case v.SHOW_TOAST:return{...e,toast:{isVisible:!0,message:t.payload.message,type:t.payload.type||"info"}};default:return e}},N=X(He,je),te="/front_6th_chapter1-2/",m=new J(te),G=new WeakMap,I={current:null,previous:null},$e={mount:null,unmount:null,watches:[],deps:[],mounted:!1},re=e=>(G.has(e)||G.set(e,{...$e}),G.get(e)),Qe=(e,t)=>!Array.isArray(e)||!Array.isArray(t)?!1:e.length!==t.length?!0:e.some((s,a)=>s!==t[a]),We=e=>{var s;const t=re(e);t.mounted||(console.log("🚀 페이지 마운트:",e.name),(s=t.mount)==null||s.call(t),t.mounted=!0,t.deps=[])},Fe=e=>{var s;const t=re(e);t.mounted&&(console.log("🔻 페이지 언마운트:",e.name),(s=t.unmount)==null||s.call(t),t.mounted=!1)},ve=({onMount:e,onUnmount:t,watches:s}={},a)=>{const n=re(a);return typeof e=="function"&&(n.mount=e),typeof t=="function"&&(n.unmount=t),Array.isArray(s)&&(n.watches=typeof s[0]=="function"?[s]:s),(...o)=>{const l=I.current!==a;return I.current&&l&&Fe(I.current),I.previous=I.current,I.current=a,l?We(a):n.watches&&n.watches.forEach(([d,c],i)=>{const u=d();Qe(u,n.deps[i])&&(console.log(`📊 의존성 변경 감지 (${a.name}):`,n.deps[i],"→",u),c()),n.deps[i]=Array.isArray(u)?[...u]:[]}),a(...o)}};async function se(e={}){const{limit:t=20,search:s="",category1:a="",category2:n="",sort:o="price_asc"}=e,l=e.current??e.page??1,d=new URLSearchParams({page:l.toString(),limit:t.toString(),...s&&{search:s},...a&&{category1:a},...n&&{category2:n},sort:o});return await(await fetch(`/api/products?${d}`)).json()}async function Ve(e){return await(await fetch(`/api/products/${e}`)).json()}async function Be(){return await(await fetch("/api/categories")).json()}const Ge=async()=>{m.query={current:void 0},p.dispatch({type:f.SETUP,payload:{...Z,loading:!0,status:"pending"}});try{const[{products:e,pagination:{total:t}},s]=await Promise.all([se(m.query),Be()]);p.dispatch({type:f.SETUP,payload:{products:e,categories:s,totalCount:t,loading:!1,status:"done"}})}catch(e){throw p.dispatch({type:f.SET_ERROR,payload:e.message}),e}},ae=async(e=!0)=>{try{p.dispatch({type:f.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:t,pagination:{total:s}}=await se(m.query),a={products:t,totalCount:s};if(e){p.dispatch({type:f.SET_PRODUCTS,payload:a});return}p.dispatch({type:f.ADD_PRODUCTS,payload:a})}catch(t){throw p.dispatch({type:f.SET_ERROR,payload:t.message}),t}},ze=async()=>{const e=p.getState();!(e.products.length<e.totalCount)||e.loading||(m.query={current:Number(m.query.current??1)+1},await ae(!1))},Ye=e=>{m.query={search:e,current:1}},W=e=>{m.query={...e,current:1}},Je=e=>{m.query={sort:e,current:1}},Ke=e=>{m.query={limit:e,current:1}},me=async e=>{try{const t=p.getState().currentProduct;if(e===(t==null?void 0:t.productId)){t.category2&&await ge(t.category2,e);return}p.dispatch({type:f.SETUP,payload:{...Z,currentProduct:null,loading:!0,status:"pending"}});const s=await Ve(e);p.dispatch({type:f.SET_CURRENT_PRODUCT,payload:s}),s.category2&&await ge(s.category2,e)}catch(t){throw console.error("상품 상세 페이지 로드 실패:",t),p.dispatch({type:f.SET_ERROR,payload:t.message}),t}},ge=async(e,t)=>{try{const n=(await se({category2:e,limit:20,page:1})).products.filter(o=>o.productId!==t);p.dispatch({type:f.SET_RELATED_PRODUCTS,payload:n})}catch(s){console.error("관련 상품 로드 실패:",s),p.dispatch({type:f.SET_RELATED_PRODUCTS,payload:[]})}},Xe=()=>{try{const e=ee.get();e&&w.dispatch({type:y.LOAD_FROM_STORAGE,payload:e})}catch(e){console.error("장바구니 로드 실패:",e)}},T=()=>{try{const e=w.getState();ee.set(e)}catch(e){console.error("장바구니 저장 실패:",e)}},Ne=(e,t=1)=>{w.dispatch({type:y.ADD_ITEM,payload:{product:e,quantity:t}}),T(),N.dispatch({type:v.SHOW_TOAST,payload:{message:"장바구니에 추가되었습니다",type:"success"}}),setTimeout(()=>{N.dispatch({type:v.HIDE_TOAST})},3e3)},Ze=e=>{w.dispatch({type:y.REMOVE_ITEM,payload:e}),T()},ne=(e,t)=>{w.dispatch({type:y.UPDATE_QUANTITY,payload:{productId:e,quantity:t}}),T()},et=e=>{w.dispatch({type:y.TOGGLE_SELECT,payload:e}),T()},tt=()=>{w.dispatch({type:y.SELECT_ALL}),T()},rt=()=>{w.dispatch({type:y.DESELECT_ALL}),T()},st=()=>{w.dispatch({type:y.REMOVE_SELECTED}),T(),N.dispatch({type:v.SHOW_TOAST,payload:{message:"선택된 상품들이 삭제되었습니다",type:"info"}}),setTimeout(()=>{N.dispatch({type:v.HIDE_TOAST})},3e3)},at=()=>{w.dispatch({type:y.CLEAR_CART}),T(),N.dispatch({type:v.SHOW_TOAST,payload:{message:"장바구니가 비워졌습니다",type:"info"}}),setTimeout(()=>{N.dispatch({type:v.HIDE_TOAST})},3e3)},g=({src:e,...t})=>{const s=String(te+e).replace("//","/");return r("img",{src:s,...t})},nt=[10,20,50,100],ot=[{value:"price_asc",label:"가격 낮은순"},{value:"price_desc",label:"가격 높은순"},{value:"name_asc",label:"이름순"},{value:"name_desc",label:"이름 역순"}],ct=async e=>{if(e.key==="Enter"){const t=e.target.value.trim();try{await Ye(t)}catch(s){console.error("검색 실패:",s)}}},lt=async e=>{const t=parseInt(e.target.value);try{await Ke(t)}catch(s){console.error("상품 수 변경 실패:",s)}},it=async e=>{const t=e.target.value;try{await Je(t)}catch(s){console.error("정렬 변경 실패:",s)}},fe=async e=>{const t=e.target.getAttribute("data-breadcrumb");try{if(t==="reset")await W({category1:"",category2:""});else if(t==="category1"){const s=e.target.getAttribute("data-category1");await W({category1:s,category2:""})}}catch(s){console.error("브레드크럼 네비게이션 실패:",s)}},dt=async e=>{const t=e.target.getAttribute("data-category1");if(t)try{await W({category1:t,category2:""})}catch(s){console.error("1depth 카테고리 선택 실패:",s)}},ut=async e=>{const t=e.target.getAttribute("data-category1"),s=e.target.getAttribute("data-category2");if(!(!t||!s))try{await W({category1:t,category2:s})}catch(a){console.error("2depth 카테고리 선택 실패:",a)}};function mt({searchQuery:e="",limit:t=20,sort:s="price_asc",category:a={},categories:n={}}){const o=Object.keys(n).length>0?Object.keys(n):[],l=nt.map(i=>r("option",{key:i,value:i,selected:Number(t)===i},i,"개")),d=ot.map(({value:i,label:u})=>r("option",{key:i,value:i,selected:s===i},u)),c=o.map(i=>r("button",{key:i,"data-category1":i,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:dt},i));return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},r("div",{className:"mb-4"},r("div",{className:"relative"},r("input",{type:"text",id:"search-input",placeholder:"상품명을 검색해보세요...",value:e,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:ct}),r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},r(g,{src:"/search-icon.svg",alt:"검색",className:"h-5 w-5 text-gray-400"})))),r("div",{className:"space-y-3"},r("div",{className:"space-y-2"},r("div",{className:"flex items-center gap-2"},r("label",{className:"text-sm text-gray-600"},"카테고리:"),["전체",a.category1,a.category2].filter((i,u)=>u===0||!!i).map((i,u)=>{if(i==="전체")return r("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:fe},"전체");if(u===1)return r("button",{key:i,"data-breadcrumb":"category1","data-category1":i,className:"text-xs hover:text-blue-800 hover:underline",onClick:fe},i);if(u===2)return r("span",{key:i,className:"text-xs text-gray-600 cursor-default"},i)}).reduce((i,u,h)=>(h>0&&i.push(r("span",{className:"text-xs text-gray-500"},">")),i.push(u),i),[])),!a.category1&&r("div",{className:"flex flex-wrap gap-2"},o.length>0?c:r("div",{className:"text-sm text-gray-500 italic"},"카테고리 로딩 중...")),a.category1&&n[a.category1]&&r("div",{className:"space-y-2"},r("div",{className:"flex flex-wrap gap-2"},Object.keys(n[a.category1]).map(i=>{const u=a.category2===i;return r("button",{key:i,"data-category1":a.category1,"data-category2":i,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${u?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:ut},i)})))),r("div",{className:"flex gap-2 items-center justify-between"},r("div",{className:"flex items-center gap-2"},r("label",{className:"text-sm text-gray-600"},"개수:"),r("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:lt},l)),r("div",{className:"flex items-center gap-2"},r("label",{className:"text-sm text-gray-600"},"정렬:"),r("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:it},d)))))}const gt=e=>{const t=e.target.closest("[data-product-id]"),s=t.getAttribute("data-product-id"),a=t.previousElementSibling;if(s&&a){const n=parseInt(a.value)+1;a.value=n,ne(s,n)}},ft=e=>{const t=e.target.closest("[data-product-id]"),s=t.getAttribute("data-product-id"),a=t.nextElementSibling;if(s&&a){const n=Math.max(1,parseInt(a.value)-1);a.value=n,ne(s,n)}},pt=(e,t)=>{const s=Math.max(1,parseInt(t)||1);e&&ne(e,s)};function yt({id:e,title:t,image:s,price:a,quantity:n,selected:o}){const l=a*n;return r("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":e},r("label",{className:"flex items-center mr-3"},r("input",{type:"checkbox",checked:o,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>et(e)})),r("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},r("img",{src:s,alt:t,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":e})),r("div",{className:"flex-1 min-w-0"},r("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":e},t),r("p",{className:"text-sm text-gray-600 mt-1"},a.toLocaleString(),"원"),r("div",{className:"flex items-center mt-2"},r("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:ft},r(g,{src:"/minus-icon.svg",alt:"감소",className:"w-3 h-3"})),r("input",{type:"number",value:n,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:d=>pt(e,d.target.value)}),r("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:gt},r(g,{src:"/plus-icon.svg",alt:"증가",className:"w-3 h-3"})))),r("div",{className:"text-right ml-3"},r("p",{className:"text-sm font-medium text-gray-900"},l.toLocaleString(),"원"),r("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":e,onClick:()=>Ze(e)},"삭제")))}const pe=()=>{N.dispatch({type:v.CLOSE_CART_MODAL})},ht=e=>{e.target.checked?tt():rt()},bt=()=>{N.dispatch({type:v.SHOW_TOAST,payload:{message:"구매 기능은 추후 구현 예정입니다.",type:"info"}})};let K=!1;const we=e=>{e.key==="Escape"&&(N.getState().cartModal.isOpen&&N.dispatch({type:v.CLOSE_CART_MODAL}),document.removeEventListener("keydown",we),K=!1)},xt=()=>{K||(document.addEventListener("keydown",we),K=!0)};function vt({items:e=[],selectedAll:t=!1,isOpen:s=!1}){if(xt(),!s)return"";const a=e.filter(d=>d.selected),n=a.length,o=e.reduce((d,c)=>d+c.price*c.quantity,0),l=a.reduce((d,c)=>d+c.price*c.quantity,0);return r("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal"},r("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay",onClick:pe}),r("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},r("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden"},r("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},r("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},r(g,{src:"/cart-icon.svg",alt:"장바구니",className:"w-5 h-5 mr-2"}),"장바구니",e.length>0&&r("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",e.length,")")),r("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onClick:pe},r(g,{src:"/close-icon.svg",alt:"닫기",className:"w-6 h-6"}))),e.length===0?r("div",{className:"flex-1 flex items-center justify-center p-8"},r("div",{className:"text-center"},r("div",{className:"text-gray-400 mb-4"},r(g,{src:"/empty-cart-icon.svg",alt:"빈 장바구니",className:"mx-auto h-12 w-12"})),r("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"장바구니가 비어있습니다"),r("p",{className:"text-gray-600"},"원하는 상품을 담아보세요!"))):r("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},r("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},r("label",{className:"flex items-center text-sm text-gray-700"},r("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:t,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:ht}),"전체선택 (",e.length,"개)")),r("div",{className:"flex-1 overflow-y-auto"},r("div",{className:"p-4 space-y-4"},e.map(d=>r(yt,{...d}))))),e.length>0&&r("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},n>0&&r("div",{className:"flex justify-between items-center mb-3 text-sm"},r("span",{className:"text-gray-600"},"선택한 상품 (",n,"개)"),r("span",{className:"font-medium"},l.toLocaleString(),"원")),r("div",{className:"flex justify-between items-center mb-4"},r("span",{className:"text-lg font-bold text-gray-900"},"총 금액"),r("span",{className:"text-xl font-bold text-blue-600"},o.toLocaleString(),"원")),r("div",{className:"space-y-2"},n>0&&r("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:st},"선택한 상품 삭제 (",n,"개)"),r("div",{className:"flex gap-2"},r("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:at},"전체 비우기"),r("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:bt},"구매하기")))))))}const Nt=({error:e})=>r("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r("div",{className:"text-center"},r("div",{className:"text-red-500 mb-4"},r(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),r("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),r("p",{className:"text-gray-600 mb-4"},e||"요청하신 상품이 존재하지 않습니다."),r("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"이전 페이지"),r("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"홈으로"))),wt=()=>{N.dispatch({type:v.HIDE_TOAST})};function Et({isVisible:e=!1,message:t="",type:s="info"}){if(!e)return"";const a=()=>{switch(s){case"success":return{bg:"bg-green-600",icon:r(g,{src:"/success-icon.svg",alt:"성공",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:r(g,{src:"/error-icon.svg",alt:"오류",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:r(g,{src:"/warning-icon.svg",alt:"경고",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:r(g,{src:"/info-icon.svg",alt:"정보",className:"w-5 h-5"})}}},{bg:n,icon:o}=a();return r("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},r("div",{className:`${n} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},r("div",{className:"flex-shrink-0"},o),r("p",{className:"text-sm font-medium"},t),r("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:wt},r(g,{src:"/close-icon-white.svg",alt:"닫기",className:"w-4 h-4"}))))}function St(){return r("h1",{className:"text-xl font-bold text-gray-900"},r("a",{href:"/","data-link":"/"},"쇼핑몰"))}function Ct(){return r("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},r("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},r("p",null,"© ",new Date().getFullYear()," 항해플러스 프론트엔드 쇼핑몰")))}const Tt=async e=>{const s=p.getState().products.find(a=>a.productId===e);s&&Ne(s,1)};function At({productId:e,title:t,image:s,lprice:a,brand:n,onClick:o}){const l=Number(a),d=c=>{c.preventDefault(),o(e)};return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":e},r("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image",onClick:d},r("img",{src:s,alt:t,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"})),r("div",{className:"p-3"},r("div",{className:"cursor-pointer product-info mb-3",onClick:d},r("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},t),r("p",{className:"text-xs text-gray-500 mb-2"},n),r("p",{className:"text-lg font-bold text-gray-900"},l.toLocaleString(),"원")),r("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":e,onClick:()=>Tt(e)},"장바구니 담기")))}function Ot(){return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},r("div",{className:"aspect-square bg-gray-200"}),r("div",{className:"p-3"},r("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),r("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),r("div",{className:"h-8 bg-gray-200 rounded"})))}const _t=async()=>{try{await ae(!0)}catch(e){console.error("재시도 실패:",e)}},Lt=async e=>{m.push(`/product/${e}`)};function Rt({products:e=[],loading:t=!1,error:s=null,totalCount:a=0,hasMore:n=!0}){return s?r("div",{className:"text-center py-12"},r("div",{className:"text-red-500 mb-4"},r(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),r("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"오류가 발생했습니다"),r("p",{className:"text-gray-600 mb-4"},s),r("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:_t},"다시 시도")):!t&&e.length===0?r("div",{className:"text-center py-12"},r("div",{className:"text-gray-400 mb-4"},r(g,{src:"/search-large-icon.svg",alt:"검색",className:"mx-auto h-12 w-12"})),r("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),r("p",{className:"text-gray-600"},"다른 검색어를 시도해보세요.")):r("div",null,a>0&&r("div",{className:"mb-4 text-sm text-gray-600"},"총 ",r("span",{className:"font-medium text-gray-900"},a.toLocaleString(),"개"),"의 상품"),r("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},e.map(o=>r(At,{...o,onClick:Lt})),t&&Array.from({length:6}).map(()=>r(Ot,null))),t&&e.length>0&&r("div",{className:"text-center py-4"},r("div",{className:"inline-flex items-center"},r(g,{src:"/loading-icon.svg",alt:"로딩",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),r("span",{className:"text-sm text-gray-600"},"상품을 불러오는 중..."))),!n&&e.length>0&&!t&&r("div",{className:"text-center py-4 text-sm text-gray-500"},"모든 상품을 확인했습니다"),r("div",{id:"scroll-trigger",className:"h-4"}))}const It=async e=>{const t=new URLSearchParams(e).toString();m.push(`/?${t}`)},Pt=async()=>{const e=p.getState().currentProduct,t={category1:e==null?void 0:e.category1,category2:e==null?void 0:e.category2,currentPage:1},s=new URLSearchParams(t).toString();m.push(`/?${s}`)},kt=()=>{const e=document.getElementById("quantity-input");if(e){const t=parseInt(e.getAttribute("max"))||100;e.value=Math.min(t,parseInt(e.value)+1)}},Dt=()=>{const e=document.getElementById("quantity-input");e&&(e.value=Math.max(1,parseInt(e.value)-1))},qt=()=>{const e=document.getElementById("quantity-input"),t=e?parseInt(e.value):1,a=p.getState().currentProduct;a&&(console.log("🛒 상품 상세 페이지에서 장바구니 추가:",a),Ne(a,t))};function Mt({product:e,relatedProducts:t=[]}){const{productId:s,title:a,image:n,lprice:o,brand:l,description:d="",rating:c=0,reviewCount:i=0,stock:u=100,category1:h,category2:A}=e,V=Number(o),q=[];return h&&q.push({name:h,category:"category1",value:h}),A&&q.push({name:A,category:"category2",value:A}),r("div",null,q.length>0&&r("nav",{className:"mb-4"},r("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},r("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"홈"),q.map((b,M)=>[r(g,{key:`${b.category}-icon`,src:"/chevron-right-icon.svg",alt:"오른쪽 화살표",className:"w-4 h-4 text-gray-400"}),r("button",{key:`${b.category}-btn`,className:"breadcrumb-link",[`data-${b.category}`]:b.value,onClick:()=>It(M===0?{category1:b.value}:{category1:q[M-1].value,category2:b.value})},b.name)]).flat())),r("div",{className:"bg-white rounded-lg shadow-sm mb-6"},r("div",{className:"p-4"},r("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},r("img",{src:n,alt:a,className:"w-full h-full object-cover product-detail-image"})),r("div",null,r("p",{className:"text-sm text-gray-600 mb-1"},l),r("h1",{className:"text-xl font-bold text-gray-900 mb-3"},a),c>0&&r("div",{className:"flex items-center mb-3"},r("div",{className:"flex items-center"},Array(5).fill(0).map((b,M)=>r(g,{key:M,src:"/star-icon.svg",alt:"별점",className:`w-4 h-4 ${M<c?"text-yellow-400":"text-gray-300"}`}))),r("span",{className:"ml-2 text-sm text-gray-600"},c,".0 (",i.toLocaleString(),"개 리뷰)")),r("div",{className:"mb-4"},r("span",{className:"text-2xl font-bold text-blue-600"},V.toLocaleString(),"원")),r("div",{className:"text-sm text-gray-600 mb-4"},"재고 ",u.toLocaleString(),"개"),d&&r("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},d))),r("div",{className:"border-t border-gray-200 p-4"},r("div",{className:"flex items-center justify-between mb-4"},r("span",{className:"text-sm font-medium text-gray-900"},"수량"),r("div",{className:"flex items-center"},r("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:Dt},r(g,{src:"/quantity-minus-icon.svg",alt:"수량 감소",className:"w-4 h-4"})),r("input",{type:"number",id:"quantity-input",value:"1",min:"1",max:u,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),r("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:kt},r(g,{src:"/quantity-plus-icon.svg",alt:"수량 증가",className:"w-4 h-4"})))),r("button",{id:"add-to-cart-btn","data-product-id":s,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:qt},"장바구니 담기"))),r("div",{className:"mb-6"},r("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:Pt},"상품 목록으로 돌아가기")),t.length>0&&r("div",{className:"bg-white rounded-lg shadow-sm"},r("div",{className:"p-4 border-b border-gray-200"},r("h2",{className:"text-lg font-bold text-gray-900"},"관련 상품"),r("p",{className:"text-sm text-gray-600"},"같은 카테고리의 다른 상품들")),r("div",{className:"p-4"},r("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},t.slice(0,20).map(b=>r("div",{key:b.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":b.productId,onClick:()=>m.push(`/product/${b.productId}`)},r("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},r("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover",loading:"lazy"})),r("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},b.title),r("p",{className:"text-sm font-bold text-blue-600"},Number(b.lprice).toLocaleString(),"원")))))))}const Ut=(e=200)=>{const t=window.pageYOffset||document.documentElement.scrollTop,s=window.innerHeight,a=document.documentElement.scrollHeight;return t+s>=a-e},jt=e=>{let t=!1;return(...s)=>{t||(t=!0,queueMicrotask(()=>{t=!1,e(...s)}))}},Ht=()=>{N.dispatch({type:v.OPEN_CART_MODAL})},oe=({headerLeft:e,children:t})=>{const s=w.getState(),{cartModal:a,toast:n}=N.getState(),o=s.items.length,l=r("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},o>99?"99+":o);return r("div",{className:"min-h-screen bg-gray-50"},r("header",{className:"bg-white shadow-sm sticky top-0 z-40"},r("div",{className:"max-w-md mx-auto px-4 py-4"},r("div",{className:"flex items-center justify-between"},e,r("div",{className:"flex items-center space-x-2"},r("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onClick:Ht},r(g,{src:"/cart-header-icon.svg",alt:"장바구니",className:"w-6 h-6"}),o>0&&l))))),r("main",{className:"max-w-md mx-auto px-4 py-4"},t),r(vt,{...s,isOpen:a.isOpen}),r(Et,{...n}),r(Ct,null))},Ee=r("h1",{className:"text-xl font-bold text-gray-900"},r("a",{href:"/","data-link":"/"},"쇼핑몰"));console.log(Ee);let F=!1;const Se=async()=>{var e;if(((e=m.route)==null?void 0:e.path)==="/"&&Ut(200)){const t=p.getState(),s=t.products.length<t.totalCount;if(t.loading||!s)return;try{await ze()}catch(a){console.error("무한 스크롤 로드 실패:",a)}}},$t=()=>{F||(window.addEventListener("scroll",Se),F=!0)},Qt=()=>{F&&(window.removeEventListener("scroll",Se),F=!1)},Wt=ve({onMount:()=>{$t(),Ge()},onUnmount:()=>{Qt()},watches:[()=>{const{search:e,limit:t,sort:s,category1:a,category2:n}=m.query;return[e,t,s,a,n]},()=>ae(!0)]},()=>{console.log("🏠 홈 페이지 로드");const e=p.getState(),{search:t,limit:s,sort:a,category1:n,category2:o}=m.query,{products:l,loading:d,error:c,totalCount:i,categories:u}=e,h={category1:n,category2:o},A=l.length<i;return r(oe,{headerLeft:Ee},r(mt,{searchQuery:t,category:h,sort:a,limit:s,categories:u}),r("div",{className:"mb-6"},r(Rt,{products:l,loading:d,error:c,totalCount:i,hasMore:A})))}),Ft=ve({onMount:()=>{me(m.params.id)},watches:[()=>[m.params.id],()=>me(m.params.id)]},()=>{const{currentProduct:e,relatedProducts:t=[],error:s,loading:a}=p.getState();return r(oe,{headerLeft:r("div",{className:"flex items-center space-x-3"},r("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},r(g,{src:"/back-icon.svg",alt:"뒤로",className:"w-6 h-6"})),r("h1",{className:"text-lg font-bold text-gray-900"},"상품 상세"))},r("div",{className:"min-h-screen bg-gray-50 p-4"},a?r("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r("div",{className:"text-center"},r("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r("p",{className:"text-gray-600"},"상품 정보를 불러오는 중..."))):s&&!e?r(Nt,{error:s}):r(Mt,{product:e,relatedProducts:t})))}),Vt=()=>oe({headerLeft:St(),children:r("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},r(g,{src:"/404.svg",alt:"페이지를 찾을 수 없습니다"}),r("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"홈으로"))});m.addRoute("/",Wt);m.addRoute("/product/:id",Ft);m.addRoute(".*",Vt);const H=jt(()=>{const e=document.getElementById("root");if(!e)return;const t=m.target;De(r(t,null),e)});function Bt(){p.subscribe(H),w.subscribe(H),N.subscribe(H),m.subscribe(H)}const Gt=()=>_e(async()=>{const{worker:e}=await import("./browser-ipwmi47v.js");return{worker:e}},[]).then(({worker:e})=>e.start({serviceWorker:{url:`${te}mockServiceWorker.js`},onUnhandledRequest:"bypass"}));function zt(){console.log("🚀 애플리케이션이 시작되었습니다."),console.log("✅ MSW 워커 시작 완료"),Xe(),console.log("✅ 장바구니 데이터 복원 완료"),Bt(),console.log("✅ 렌더링 시스템 초기화 완료"),m.start(),console.log("✅ 렌더링 설정 완료"),console.log("🎉 애플리케이션 초기화 완료!")}Gt().then(zt);
